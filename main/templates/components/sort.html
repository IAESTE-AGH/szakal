<form method="get" action=".">
    <label for="sort_by">Sortuj po:</label>
    <select name="sort_by" id="sort_by">
        {% for field in fields %}
            <option value={{ field.name }}>{{ field.name }}</option>
        {% endfor %}
    </select>
    <select name="order" id="order">
        <option value="asc">rosnąco</option>
        <option value="desc">malejąco</option>
    </select>
    <button>sortuj</button>
</form>

<form method="post" action={%  if "search" in  request.path %}
 " "
{% else %}
"search/"
{% endif %}>
    {% csrf_token %}
    <label for="search">Wyszukaj:</label>
    <input type="text" id="searched" name="searched">
    <button>szukaj</button>
</form>

<script>
    document.getElementById("sort_by").value = getQueryParameter("sort_by") ?? "id"
    document.getElementById("order").value = getQueryParameter("order") ?? "malejąco"
    document.getElementById("searched").value = getQueryParameter("searched") ?? ""
    function getQueryParameter(parameterName) {
        var queryString = window.top.location.search.substring(1);
        var parameterName = parameterName + "=";
        if (queryString.length > 0) {
            begin = queryString.indexOf(parameterName);
            if (begin != -1) {
                begin += parameterName.length;
                end = queryString.indexOf("&", begin);
                if (end == -1) {
                    end = queryString.length
                }
                console.log(queryString.substring(begin, end))
                return unescape(queryString.substring(begin, end));
            }
        }
        return;
    }
</script>